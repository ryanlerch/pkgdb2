<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>{% block title %}{{ config['PROJECT_NAME'] }} Package Database{% endblock %}</title>
    <link rel="shortcut icon" type="image/vnd.microsoft.icon"
        href="//fedoraproject.org/static/images/favicon.ico"/>
    <link rel="stylesheet" type="text/css" media="screen"
        href="{{ url_for('static', filename='pkgdb.css') }}"/>
      <link href="https://apps.fedoraproject.org/global/fedora-bootstrap-1.0.2/fedora-bootstrap.css"
            type="text/css" rel="stylesheet" />
    <link type="text/css" rel="stylesheet"
        href="{{ url_for('static',
            filename='jquery-ui-1.9.2.custom.css')}}" />
    {% block header %}{% endblock %}

    <link title="{{ config['PROJECT_NAME'] }} PkgDB2: Packages"
        rel="search" type="application/opensearchdescription+xml"
        href="{{ url_for('ui_ns.opensearch', xmlfile='pkgdb_packages.xml') }}" />
    <link title="{{ config['PROJECT_NAME'] }} PkgDB2: Packagers"
        rel="search" type="application/opensearchdescription+xml"
        href="{{ url_for('ui_ns.opensearch', xmlfile='pkgdb_packager.xml') }}" />

  </head>
  <body id="{% block tag %}{% endblock %}"
        prefix="doap: http://usefulinc.com/ns/doap#"
  >


        <!-- HEADER -->
        <div class="masthead">
          <div class="container">
            <div class="row">
             <div class="col-sm-3">
               <a href="/">
                 <img src="{{ url_for('static', filename='packagedb-logo.png') }}"
                   alt="Elections Logo" height="40px"/>
               </a>
             </div>
             <div class="col-sm-9">
               <div class="row">
                 <nav class="navbar navbar-light pt-0 pb-0">
                   <div class="container">
                     <ul class="nav navbar-nav nav-underline float-xs-right">

                       {% if g.fas_user %}
                        <li class="nav-item dropdown pl-1">
                          <a class="nav-link dropdown-toggle" data-toggle="dropdown"
                             href="#" role="button" aria-haspopup="true" aria-expanded="false">
                            <img src="{{ g.fas_user.email | avatar_from_email(24) }}"/>
                          </a>
                          <div class="dropdown-menu dropdown-menu-right">
                            <div class="dropdown-header"><strong>{{ g.fas_user.username }}</strong></div>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="{{url_for('ui_ns.packager_info', packager=g.fas_user.username)}}">my profile</a>
                            <a class="dropdown-item" href="{{url_for('ui_ns.pending_acl')}}">Pending ACLs</a>
                            <a class="dropdown-item" href="{{ url_for('ui_ns.packager_requests', packager=g.fas_user.username) }}">My Requests</a>
                            <div class="dropdown-divider"></div>
                            {% if is_admin %}
                            <a class="dropdown-item" href="{{url_for('ui_ns.admin')}}">Admin</a>
                            {% endif %}
                            <a class="dropdown-item" href="{{ url_for('ui_ns.logout') }}?next={{request.url}}">log out</a>
                          </div>
                        </li>
                        {% else %}
                        <li class="nav-item pl-1">
                          <a href="{{ url_for('ui_ns.login') }}?next={{request.url}}">Log In</a>
                        </li>
                        {% endif %}
                     </ul>
                   </div>
                 </nav>

               </div>
             </div>
           </div>

          </div>
        </div><!-- end header -->
        <div class="subheader">
          <div class="container">
            <form action="{{url_for('ui_ns.search')}}" id="headerSearch">
              <select name="type">
                <option value=""
                  {% if select=='packages' %} selected {% endif %}>
                    Packages</option>
                <option value="packager"
                  {% if select=='packagers' %} selected {% endif %}>
                    Packagers</option>
                <option value="orphaned"
                {% if select=='orphaned' %} selected {% endif %}>
                    Orphaned</option>
                <option value="retired"
                {% if select=='retired' %} selected {% endif %}>
                    Retired</option>
                {% for ns in namespaces %}
                <option value="{{ ns }}"
                {% if select==ns %} selected {% endif %}>
                    {{ ns }}</option>
                {% endfor %}
              </select>
              <input type="text" name="term" value="{{ motif if motif else '' }}"/>
              <input type="submit" value="Search"/>
            </form>

            <ul class="nav nav-tabs nav-small">

              <li class="nav-item">
                <a class="nav-link {%if tag == 'index'%}active{%endif%}"
                   href="{{url_for('ui_ns.index')}}">
                    <span>Home</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link {%if tag == 'packages'%}active{%endif%}"
                   href="{{url_for('ui_ns.list_packages')}}">
                    <span>Packages</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link {%if tag == 'packagers'%}active{%endif%}"
                    href="{{url_for('ui_ns.list_packagers')}}">
                    <span>Packagers</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link {%if tag == 'collections'%}active{%endif%}"
                   href="{{url_for('ui_ns.list_collections')}}">
                    <span>Collections</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link {%if tag == 'stats'%}active{%endif%}"
                   href="{{url_for('ui_ns.stats')}}">
                    <span>Stats</span>
                </a>
              </li>
              </ul>
            </div>
        </div>

        <div class="bodycontent py-1">
          <div class="container">
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if category, messages %}
                <ul id="flashes">
                    {% for category, message in messages %}
                    <li class="{{ category }}">{{ message }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
            {% endwith %}

            {% block content %}{% endblock %}
          </div>
        </div>

        {% if options is defined %}
        <div id="options">
            <div id="options_title">
                <h3>{% block options_title %}Options{% endblock %}</h3>
            </div>
            <div id="delimiter"></div>
            <div id="options_content">
                {% block options %}{% endblock %}
            </div>
        </div>
        {% endif %}

        <p id="footer">
          Copyright &copy; 2013-2017 Red Hat
          <a href="https://fedorahosted.org/pkgdb2/">pkgdb2</a>
          -- {{version}}
          -- <a href="http://pkgdb2.rtfd.org" rel="noopener noreferrer"
                target="_blank">Documentation</a>
          -- <a href="{{ url_for('api_ns.api') }}">API</a>
        </p>


    {% block jscripts %}
    <script type="text/javascript"
        src="{{ url_for('static',
            filename='jquery-1.10.2.js') }}">
    </script>
    <script type="text/javascript"
        src="https://apps.fedoraproject.org/global/fedora-bootstrap-1.0.2/fedora-bootstrap.js">
    </script>
    <script type="text/javascript"
        src="{{ url_for('static',
            filename='jquery-ui-1.10.4.custom.min.js') }}">
    </script>

    {% if g.pending_acls %}
    <script type="text/javascript"
        src="{{ url_for('static', filename='notify.min.js') }}">
    </script>

    <script type="text/javascript">
        $(function(){
            $('#mainNav').notify(
                "You have ACLs awaiting review from you",
                {
                    position: "bottom center",
                    className: "warn",
                }
            );
        });
    </script>
    {% endif %}

    {% if fedmenu_url is defined %}
    <script src="{{fedmenu_url}}/js/fedora-libravatar.js"></script>
    <script src="{{fedmenu_url}}/js/fedmenu.js"></script>
    <script>
      fedmenu({
          'url': '{{fedmenu_data_url}}',
          'mimeType': 'application/javascript',
          'position': 'bottom-right',
          {% if packager %}
            'user': '{{packager}}',
          {% endif %}
          {% if package is defined %}
           {% if package.name is defined %}
            'package': '{{package.name}}',
           {% else %}
            'package': '{{package}}',
           {% endif %}
            'alignment': 'horizontal',
          {% endif %}
      });
    </script>
    {% endif %}

    {% endblock %}

  </body>
</html>
